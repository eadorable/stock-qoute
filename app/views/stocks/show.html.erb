<!-- app/views/stocks/show.html.erb -->
<%= form_with(url: stock_path(@stock), method: :get, id: 'chart-form', data: { controller: 'chart-form' }) do |f| %>
  <div class="form-inputs">
    <div class="form-group inline-form-element">
      <%= f.label :limit %>
      <%= f.select :limit, (10..5000).step(10).to_a, {}, data: { target: 'chart-form.limit' } %>
    </div>

    <div class="form-group inline-form-element">
      <%= f.label :timespan %>
      <%= f.select :timespan, ['day', 'week', 'month', 'quarter', 'year'], {}, data: { target: 'chart-form.timespan' } %>
    </div>

    <div class="form-group inline-form-element">
      <%= f.label :window %>
      <%= f.select :window, [10, 20, 50, 100, 200], {}, data: { target: 'chart-form.window' } %>
    </div>

    <div class="form-group inline-form-element">
      <%= f.submit "Update Chart", class: "btn btn-primary", data: { action: 'chart-form#updateChart' } %>
    </div>
  </div>
<% end %>

<%= line_chart @timestamp.zip(@value).to_h, height: '500px', xtitle: 'TimeStamp', ytitle: 'Value', library: { hAxis: { title: 'TimeStamp' }, vAxis: { title: 'Value' } } %>
